 name: Sync Code Changes


 on:
   push:
     branches: 
       - main

 jobs:
   sync:
     runs-on: ubuntu-latest
   
     steps:
       - name: Checkout source code
         uses: actions/checkout@v2
         with:
           repository: angelobryan1/SampleRepo2
           ref: main
       
       - name: Configure SSH
         run: |
           mkdir -p ~/.ssh
           echo "$SSH_PRIVATE_KEY" > ~/.ssh/id_rsa
           chmod 600 ~/.ssh/id_rsa
           ssh-keyscan $SSH_HOST >> ~/.ssh/known_hosts
       
       - name: Run SSH command
         run: ssh $SSH_USERNAME@$SSH_HOST 'echo "Hello, world!"'
         
       - name: Merge Source Repository into Destination
         run: |
           git remote add source git@github.com:angelobryan1/SampleRepoOne
           git fetch source
           git merge source/main
         
       - name: Push Merged Changes
         run: git push origin main
