 name: Sync Code Changes


 on:
   push:
     branches: 
       - main

 jobs:
   sync:
     runs-on: ubuntu-latest
    
    
     steps:
       - name: Checkout source code
         uses: actions/checkout@v2
       
       - name: Set Git config and authentication
         run: |
           git config --global user.name "angelobryan1"
           git config --global user.email "angelo072394@gmail.com"
        
       - name: Add Destination Remote
         run: git remote add destination https://github.com/angelobryan1/SampleRepo2.git
           
       - name: Fetch Destination Branches
         run: git fetch destination
         
       - name: Sync Branches
         run: |
           for branch in $(git branch --all | grep -v HEAD); do
             echo "WEEEEEEEEEE  $branch"
             if git rev-parse --quiet --verify destination/$branch; then
               git merge destination/$branch --allow-unrelated-histories -m "Merge changes from destination repository"
               git push destination HEAD
             else
               echo "Branch $branch does not exist in the destination reepository."
             fi
           done
