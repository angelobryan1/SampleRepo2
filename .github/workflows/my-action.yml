 name: Sync Code Changes


 on:
   push:
     branches: [ "main" ]

 jobs:
   sync:
     runs-on: ubuntu-latest
    
    
     steps:
       - name: Checkout source code
         uses: actions/checkout@v2
       
       - name: Set Git config and authentication
         run: |
           git config --global user.name "angelobryan1"
           git config --global user.email "angelo072394@gmail.com"
        
       - name: Add Destination Remote
         run: git remote add destination https://github.com/angelobryan1/SampleRepo2.git
           
       - name: Fetch Destination Branches
         run: git fetch destination
         
       - name: Sync Branches
         run: |
           for branch in $(git branch --all | grep -v HEAD); do
             echo WEEEEEEEEEEEEEEEEEEEE ${branches#remotes/origin/}
             git checkout ${branches#remotes/origin/}
             git merge destination/${branches#remotes/origin/}
             git push destination HEAD
           done
